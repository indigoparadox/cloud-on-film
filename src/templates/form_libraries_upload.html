{% extends 'base.html' %}

{% block scripts %}
<script type="text/javascript">

var thread_id = '{{ id }}';

function updateProgress() {
    $.post( "{{ url_for( 'cloud_libraries_upload', id=id ) }}",
    function( data ) {
        $('#thread-progress').css( 'width', data + '%' );
        setTimeout( updateProgress, 3000 );
    } );
}

$().ready( function() {
    updateProgress();
} );

</script>
{% endblock %}

{% block content %}

{% if '' != id %}
<div class="py-3">
<div class="progress">
<div id="thread-progress" class="progress-bar" role="progressbar"
    aria-valuenow="{{ progress }}" aria-valuemin="0" aria-valuemax="100"></div>
 </div>
</div>
{% else %}
<form action="" method="POST" enctype="multipart/form-data">
{{ form.hidden_tag() }}
<div id="upload_library">
{{ form.upload.label }}
{{ form.upload }}
</div>
<input type="submit" value="Upload" />
</div>
</form>
{% endif %}

{% endblock %}

